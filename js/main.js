const loadElementMobile=(a,e)=>{e.forEach(e=>{e=document.querySelectorAll("."+e);a&&e.forEach(e=>e.classList.remove("u-is-hidden")),a||e.forEach(e=>e.classList.add("u-is-hidden"))})};window.addEventListener("load",()=>{var e=["fa-calendar"];0<navigator.maxTouchPoints?loadElementMobile(!0,e):loadElementMobile(!1,e)});
(()=>{var e=document.querySelector(".m-btns");const l=document.querySelector(".m-calculation__result"),o=document.querySelector(".m-calculation__operation"),r=/[-|\+|=|\*|\/|percent|negative|AC|C]/,c=/^-?\d+\.\d+$/,a=/^-?\d+(\.\d+)?$/;let d="",u,C=!1;const t=e=>{var t,n=document.querySelector('.m-btns__btn[data-value="AC"]'),r=document.querySelector('.m-btns__btn[data-value="C"]');switch("AC"!==e&&"0"===o.textContent&&(o.textContent=""),e){case"+":o.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-plus"></i>');break;case"-":o.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-minus"></i>');break;case"*":o.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-xmark"></i>');break;case"/":o.insertAdjacentHTML("beforeend",'<i class="fa-solid fa-divide"></i>');break;case".":""!==d&&o.lastChild.remove(),o.insertAdjacentHTML("beforeend",(()=>{var e=d.split(" ").filter(String);let t=e.at(-1);return void 0===t||/^-?\d+\.$|^-?\d*\.\d+$/.test(t)?void 0===t&&(t="0.",d="0."):(t+=".",e.splice(-1,1,t),d=e.join(" ")),t})());break;case"=":var a=(()=>{var e=d.split(" ");let t=Number(e.shift());for(;0<e.length;){switch(e.shift()){case"+":t+=Number(e.shift());break;case"-":t-=Number(e.shift());break;case"*":t*=Number(e.shift());break;case"/":t/=Number(e.shift())}c.test(t.toString())&&(t=Number(t.toFixed(2)))}return addHistoryOperation(d,t),o.textContent=0,d="",t})();l.textContent=a,r.dataset.value="AC",r.textContent="AC";break;case"AC":l.textContent="0";break;case"C":o.textContent="0",d="",r.dataset.value="AC",r.textContent="AC";break;case"erase":var a=(()=>{var e=d.split(" ").filter(String);let t=e.at(-1);var n=u.split(" ").filter(String);let r=n.at(-1);return t=t.slice(0,-1),e.splice(-1,1,t),d=e.join(" "),r=r.slice(0,-1),n.splice(-1,1,r),u=n.join(" "),console.log("operation.length: ",d.length),0<d.length?t:"0"})();console.log("value: ",a),console.log("elMCalOperation: ",o.lastChild),o.lastChild?.remove(),o.insertAdjacentHTML("beforeend",a),console.log("elMCalOperation: ",o.lastChild),console.log("-----------------------------------------------------"),0===d.length&&(r.dataset.value="AC",r.textContent="AC");break;case"percent":o.lastChild.remove(),o.insertAdjacentHTML("beforeend",(()=>{var e=d.split(" ").filter(String);let t=e.at(-1);var n=u.split(" ").filter(String).at(-1);return C=Number.isNaN(Number(t))||C?(t=n,!1):(t/=100,!0),e.splice(-1,1,t),d=e.join(" "),t})());break;case"negative":o.lastChild.remove(),o.insertAdjacentHTML("beforeend",(a=d.split(" ").filter(String),t=a.at(-1),s=u.split(" ").filter(String),i=s.at(-1),a.splice(-1,1,t*=-1),d=a.join(" "),s.splice(-1,1,i*=-1),u=s.join(" "),t));break;default:var i=d.split(" ").at(-1),s=(1<i.length&&o.lastChild.remove(),1<i.length?i.slice(0,-1)+e:e);o.insertAdjacentHTML("beforeend",s),n&&"C"!==n.dataset.value&&(n.dataset.value="C",n.textContent="C"),C=!1}"percent"!==e&&"negative"!==e&&"erase"!==e&&"."!==e&&(u=d)},i=(e,t)=>{t&&(d+=e),t||"percent"===e||"negative"===e||"erase"===e||"."===e||(d+=" "+e+" ")},n=t=>{var n=d.trim().split(" ").at(-1);if("0"===t&&0===d.length)return!1;if("0"===t&&1===n.length&&"0"===n)return!1;if(("percent"===t||"negative"===t)&&r.test(n)&&1===n.length)return!1;if(!t)return!1;if(""===d&&r.test(t)&&"AC"!==t)return!1;if(r.test(n)&&"."===t)return!1;if(r.test(t)&&!a.test(o.lastChild?.textContent)&&"erase"!==t&&(o.lastChild.remove(),d=d.slice(0,-3),console.log("test")),"="!==t&&"C"!==t){if(!(d.split(" ").join("").length<18)&&"erase"!==t)return!1;if(17===d.split(" ").join("").length&&r.test(t)&&"erase"!==t)return!1}if("="===t&&a.test(d))return!1;{n=t;let e=!1;return a.test(n)&&(i(n,!0),e=!0),r.test(n)&&"AC"!==n&&"C"!==n&&"="!==n&&(i(n,!1),e=!0),e="AC"!==n&&"C"!==n&&"="!==n&&"."!==n?e:!0;return}};e.addEventListener("click",function(e){e=e.target.dataset.value;n(e)&&t(e)}),l.addEventListener("click",function(e){console.log(e.target.textContent);e=e.target.textContent;"0"!==e&&("0"===o.textContent&&(o.textContent=""),o.insertAdjacentHTML("beforeend",e),d+=e,u=d)})})();
const switchDisableBtn=(a,o)=>{o.forEach(o=>{o=document.querySelectorAll("."+o);a&&o.forEach(o=>o.classList.add("no-hover")),a||o.forEach(o=>o.classList.remove("no-hover"))})};window.addEventListener("load",()=>{var o=[];0<navigator.maxTouchPoints?switchDisableBtn(!0,o):switchDisableBtn(!1,o)});
const addHistoryOperation=(e,t)=>{var o=document.querySelector(".m-history"),r=document.querySelector("#history-row-template").content.cloneNode(!0);r.querySelector(".m-history__operation").textContent=e,r.querySelector(".m-history__result").textContent=t,console.log(),o.insertAdjacentHTML("beforeend",r.firstElementChild.outerHTML),o.scrollTop=-500};